<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„Ø¹Ø¨Ø© Ø¬Ù…Ø¹ Ø§Ù„ÙƒÙˆÙŠÙ†Ø² ğŸª™</title>

<style>
body{
    font-family: Arial, sans-serif;
    text-align:center;
    background:linear-gradient(to bottom,#a0e9ff,#70c1ff);
}

/* Ø²Ø±Ø§Ø± Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
button{
    padding:14px 35px;
    font-size:18px;
    font-weight:bold;
    color:#fff;
    border:none;
    border-radius:40px;
    background:linear-gradient(135deg,#00c6ff,#0072ff);
    box-shadow:0 8px 0 #005ecb;
    cursor:pointer;
    transition:0.2s;
}
button:hover{
    transform:translateY(2px);
    box-shadow:0 5px 0 #005ecb;
}
button:disabled{
    background:#aaa;
    box-shadow:none;
    cursor:not-allowed;
}

/* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨ */
#gameArea{
    position:relative;
    margin:20px auto;
    width:400px;
    height:500px;
    background:#fff;
    border-radius:15px;
    border:4px solid #333;
    overflow:hidden;
}

/* Ø§Ù„Ø³Ù„Ø© */
#basket{
    position:absolute;
    bottom:15px;
    width:120px;
    height:55px;
    background:linear-gradient(to bottom,#ff8a00,#e65100);
    border-radius:0 0 25px 25px;
    border:4px solid #bf360c;
    box-shadow:0 6px 0 #bf360c,inset 0 4px 6px rgba(255,255,255,.4);
}
#basket::before{
    content:'';
    position:absolute;
    top:-18px;
    left:30px;
    width:60px;
    height:14px;
    border:4px solid #bf360c;
    border-bottom:none;
    border-radius:20px 20px 0 0;
}

/* Ø§Ù„ÙƒÙˆÙŠÙ† */
.coin{
    position:absolute;
    width:30px;
    height:30px;
    border-radius:50%;
    background:radial-gradient(circle at 30% 30%,#fff59d,#fbc02d);
    box-shadow:0 0 10px rgba(255,215,0,.8);
    top:0;
}

/* Ù„ÙˆØ­Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
#scoreBoard{
    font-size:18px;
    margin-top:10px;
}

/* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ© */
#overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.7);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:1000;
}
#popup{
    background:#fff;
    padding:30px;
    border-radius:15px;
    width:320px;
    text-align:center;
}
#popup h2{
    margin-bottom:15px;
}
#popup p{
    font-size:18px;
}
</style>
</head>

<body>

<h1>Ù„Ø¹Ø¨Ø© Ø¬Ù…Ø¹ Ø§Ù„ÙƒÙˆÙŠÙ†Ø² ğŸª™</h1>
<button id="startBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>

<div id="gameArea">
    <div id="basket"></div>
</div>

<div id="scoreBoard">
    Ø§Ù„ÙˆÙ‚Øª: <span id="timer">20</span> Ø«Ø§Ù†ÙŠØ© |
    Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span>
</div>

<div id="overlay">
    <div id="popup">
        <h2 id="popupTitle"></h2>
        <p id="popupText"></p>
    </div>
</div>

<script>
const basket=document.getElementById("basket");
const gameArea=document.getElementById("gameArea");
const scoreSpan=document.getElementById("score");
const timerSpan=document.getElementById("timer");
const startBtn=document.getElementById("startBtn");
const overlay=document.getElementById("overlay");
const popupTitle=document.getElementById("popupTitle");
const popupText=document.getElementById("popupText");

let score=0;
let timeLeft=20;
let gameRunning=false;
let playedOnce=false;
let gameInterval,coinInterval;

/* ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø³Ù„Ø© */
gameArea.addEventListener("mousemove",e=>{
    if(!gameRunning)return;
    const rect=gameArea.getBoundingClientRect();
    let x=e.clientX-rect.left-basket.offsetWidth/2;
    x=Math.max(0,Math.min(x,gameArea.clientWidth-basket.offsetWidth));
    basket.style.left=x+"px";
});

/* Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆÙŠÙ† */
function createCoin(){
    if(!gameRunning)return;
    const coin=document.createElement("div");
    coin.className="coin";
    coin.style.left=Math.random()*(gameArea.clientWidth-30)+"px";
    gameArea.appendChild(coin);

    let y=0;
    const fall=setInterval(()=>{
        if(!gameRunning){coin.remove();clearInterval(fall);return;}
        y+=5;
        coin.style.top=y+"px";

        const c=coin.getBoundingClientRect();
        const b=basket.getBoundingClientRect();

        if(c.bottom>=b.top&&c.left<b.right&&c.right>b.left){
            score++;
            scoreSpan.textContent=score;
            coin.remove();
            clearInterval(fall);
        }
        if(y>gameArea.clientHeight){
            coin.remove();
            clearInterval(fall);
        }
    },30);
}

/* Ø§Ù„Ø®ØµÙ… */
function getDiscount(s){
    if(s>=23)return 25;
    if(s>=18)return 20;
    if(s>=15)return 15;
    return 0;
}

/* Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© */
function startGame(){
    if(playedOnce)return;
    playedOnce=true;
    gameRunning=true;
    score=0;
    timeLeft=20;
    scoreSpan.textContent=0;
    timerSpan.textContent=20;
    startBtn.disabled=true;

    coinInterval=setInterval(createCoin,800);
    gameInterval=setInterval(()=>{
        timeLeft--;
        timerSpan.textContent=timeLeft;
        if(timeLeft<=0)endGame();
    },1000);
}

/* Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© */
function endGame(){
    gameRunning=false;
    clearInterval(gameInterval);
    clearInterval(coinInterval);

    const d=getDiscount(score);
    if(d>0){
        popupTitle.textContent="ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ!";
        popupText.textContent=`Ø¬Ù…Ø¹Øª ${score} ÙƒÙˆÙŠÙ†\nØ®ØµÙ… ${d}%`;
    }else{
        popupTitle.textContent="â° Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª";
        popupText.textContent=`Ø¬Ù…Ø¹Øª ${score} ÙƒÙˆÙŠÙ†\nØ­Ø¸ Ø£ÙˆÙØ±`;
    }
    overlay.style.display="flex";
}

startBtn.addEventListener("click",startGame);
</script>

</body>
</html>
